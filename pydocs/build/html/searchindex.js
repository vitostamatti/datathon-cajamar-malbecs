Search.setIndex({"docnames": ["index", "malbecs", "malbecs.feateng", "malbecs.modeling", "malbecs.preprocess", "malbecs.utils", "readme"], "filenames": ["index.rst", "malbecs.rst", "malbecs.feateng.rst", "malbecs.modeling.rst", "malbecs.preprocess.rst", "malbecs.utils.rst", "readme.rst"], "titles": ["Welcome to malbecs\u2019s documentation!", "malbecs", "malbecs.feateng", "malbecs.modeling", "malbecs.preprocess", "malbecs.utils package", "About Malbecs"], "terms": {"about": 0, "feateng": [0, 1], "eto": [0, 1, 3], "features_eng": [0, 1], "wine": [0, 1, 3], "model": [0, 1, 6], "train": [0, 1], "transform": [0, 1, 2, 4], "preprocess": [0, 1, 3, 6], "meteo": [0, 1], "util": [0, 1, 2, 3, 4], "packag": [0, 1, 2, 3, 4, 6], "index": [0, 3], "modul": 0, "search": [0, 3], "page": 0, "thi": [2, 3, 4, 5], "provid": [2, 3, 4, 5], "variou": [2, 3, 4, 5], "handl": 2, "miss": [2, 3, 4, 5], "valu": [2, 3, 4, 5], "variabl": [2, 3, 4], "creat": [2, 3, 4, 6], "new": [2, 4], "featur": [2, 3, 4, 6], "more": [2, 4], "feateng_eto": 2, "eto_data": [2, 3, 4], "output_path": [2, 4], "none": [2, 3, 4], "perform": [2, 3, 4, 6], "engin": [2, 6], "panda": [2, 3, 4, 5], "datafram": [2, 3, 4, 5], "contain": [2, 3, 4, 6], "data": [2, 3, 4, 5, 6], "arg": [2, 3, 4, 5], "The": [2, 3, 4, 5], "input": [2, 3, 4, 5], "option": [2, 3, 4, 5], "string": [2, 3, 4], "repres": [2, 3, 4], "path": [2, 3, 4], "save": [2, 3, 4], "output": [2, 4], "csv": [2, 3, 4], "file": [2, 3, 4], "return": [2, 3, 4, 5], "A": [2, 3, 4, 5], "precipit": [2, 3, 4], "snow": [2, 3, 4], "column": [2, 3, 4, 5], "includ": [2, 4], "meanprecip": 2, "totalprecip": 2, "stdlprecip": 2, "meansnow": 2, "totalsnow": 2, "get_mean_featur": 2, "name": [2, 3, 4, 5], "calcul": [2, 3, 4], "mean": [2, 3, 4, 5], "set": [2, 3, 4], "each": [2, 3, 4], "row": [2, 4], "list": [2, 3, 4, 5], "us": [2, 3, 4], "str": [2, 3, 4, 5], "store": 2, "copi": 2, "an": [2, 3, 4], "addit": [2, 4], "specifi": [2, 3, 4, 5], "get_std_featur": 2, "standard": [2, 3, 4], "deviat": [2, 3, 4], "get_total_featur": 2, "total": [2, 3, 4], "above_mean_col": 2, "col": [2, 3, 4, 5], "binari": 2, "indic": [2, 3, 4], "whether": [2, 3, 4], "given": [2, 3, 4], "ar": [2, 3, 4], "abov": [2, 4], "below": [2, 4], "product": [2, 3], "where": [2, 3, 4], "campa\u00f1a": [2, 3], "doe": 2, "equal": 2, "21": [2, 3], "origin": 2, "df_for_f": 2, "filter": [2, 3, 4], "out": [2, 4], "remov": 2, "eto_annual_mean": 2, "df": 2, "cols_list": 2, "annual": 2, "weather": [2, 4], "base": [2, 3], "which": [2, 4], "averag": [2, 3, 4], "those": 2, "drop": 2, "eto_annual_sum": 2, "sum": [2, 4], "eto_dict_gener": 2, "gener": [2, 3, 4], "dictionari": [2, 3], "dict": [2, 3], "kei": [2, 3, 4], "quantiles_col": 2, "categor": [2, 3], "quartil": 2, "uniqu": [2, 4], "group": [2, 3, 4, 5], "fall": 2, "feateng_wine_data": 2, "wine_data": [2, 3, 4], "appli": [2, 4], "seri": [2, 3], "result": 2, "should": [2, 4], "get_historic_prod_he_by_var_modo": 2, "comput": [2, 3, 4], "histor": [2, 3], "prod_he_shift1": 2, "varieti": 2, "mode": [2, 3], "all": [2, 3, 4, 6], "period": 2, "dataset": [2, 4], "get_historic_prod_he_by_var_modo_modo_zona": 2, "prod_h": 2, "variedad": [2, 3], "modo": [2, 3], "modo_zona": 2, "year": [2, 3, 4], "between": [2, 3, 4], "minimum": [2, 3, 4], "maximum": [2, 3, 4], "paramet": 2, "pd": [2, 3, 4, 5], "get_n_var_finca_camp": 2, "number": [2, 3, 4], "farm": 2, "campaign": [2, 3], "crop": [2, 3], "merg": [2, 3, 4], "separ": 2, "same": 2, "inform": [2, 4], "get_production_change_by_estacion": 2, "chang": [2, 3], "season": 2, "station": [2, 4], "get_production_chang": 2, "sever": 2, "shift": [2, 3], "updat": 2, "follow": [2, 3, 4], "prod_shift1_gt_shift2": 2, "1": [2, 3, 4], "0": [2, 3, 4, 5], "prod_shift1": 2, "greater": [2, 4], "than": [2, 4], "prod_shift2": 2, "prod_shift_max": [2, 3], "prod_shift_chang": [2, 3], "differ": [2, 3, 4], "prod_shift_avg": [2, 3], "get_shifted_product": 2, "combin": [2, 4], "id_finca": 2, "two": [2, 3], "add": [2, 4], "If": [2, 3, 4], "correspond": [2, 4], "replac": [2, 5], "get_shifted_production_by_finca": 2, "produccion": 2, "plu": 2, "prod_finca_shift_1": 2, "prod_finca_shift_2": 2, "2": [2, 3, 4], "respect": [2, 3], "avail": 2, "get_shifted_production_by_var": 2, "prod_var_shift_1": 2, "prod_var_shift_2": 2, "finca": 2, "get_shifted_production_h": 2, "per": 2, "hectar": 2, "ad": [2, 4], "prod_he_shift2": 2, "get_shifted_production_he_by_var": 2, "get_shifted_production_he_by_var_modo": 2, "he": 2, "prod_he_var_modo_mean_shift1": 2, "prod_he_var_modo_std_shift1": 2, "prod_he_var_modo_chang": 2, "previou": 2, "i": 2, "e": [2, 4], "current": [2, 3], "get_shifted_production_he_by_var_modo_zona": 2, "zone": [2, 3], "get_shifted_production_he_by_zon": 2, "get_shifted_production_he_chang": 2, "yield": [2, 3], "compar": [2, 3], "prod_he_shift_chang": 2, "prod_he_shift_avg": 2, "superfici": [2, 3, 4], "get_shifted_superfici": 2, "sup_shift1": 2, "sup_shift2": 2, "nan": [2, 5], "fill": [2, 3, 4, 5], "get_sup_tot_camp_finca": 2, "surfac": 2, "area": 2, "get_sup_tot_finca": 2, "get_total_prod_from_h": 2, "end": [2, 4], "_he": 2, "multipli": [2, 4], "_he_tot": 2, "after": 2, "evalu": 3, "get_final_model": 3, "final": [3, 4], "challeng": 3, "ipelin": 3, "pipelin": 3, "get_model_fase_nacion": 3, "get_final_model_eto_featur": 3, "precipuo": 3, "wa": [3, 4], "over": [3, 4], "from": [3, 4], "monthli": [3, 4], "first": 3, "six": 3, "month": [3, 4], "precip_col": 3, "amount": 3, "dai": [3, 4], "snow_col": 3, "get_final_model_num_featur": 3, "numer": 3, "integ": 3, "float": [3, 4, 5], "size": 3, "field": 3, "time": 3, "prod_he_var_zone_mean_hist_tot": 3, "varianc": 3, "divid": 3, "prod_he_var_zone_std_hist_tot": 3, "prod_he_var_modo_zona_mean_shift1_tot": 3, "s": 3, "prod_he_var_modo_zona_change_tot": 3, "object": [3, 4], "nation": 3, "phase": 3, "step": [3, 4], "prep": 3, "get_preprocesing_fase_nacion": 3, "randomforestregressor": 3, "hyperparamet": 3, "random_st": 3, "seed": 3, "random": 3, "n_estim": 3, "tree": 3, "forest": 3, "min_samples_leaf": 3, "sampl": 3, "requir": 3, "leaf": 3, "node": 3, "n_job": 3, "job": 3, "run": 3, "parallel": 3, "both": 3, "fit": 3, "predict": 3, "max_featur": 3, "consid": 3, "when": 3, "look": 3, "best": 3, "split": 3, "max_sampl": 3, "draw": 3, "x": [3, 4], "estim": 3, "columntransform": 3, "flag": 3, "ordinalencod": 3, "encod": 3, "sup_is_nan": 3, "ordin": 3, "unknown": 3, "zona_encod": 3, "targetencod": 3, "id_zona": 3, "target": 3, "zona_encoder_2": 3, "variedad_encod": 3, "modo_encod": 3, "scaler": 3, "standardscal": 3, "scale": 3, "under_over_scal": 3, "precip_pca": 3, "pca": 3, "compon": 3, "reduc": 3, "dimension": 3, "load_trained_model": 3, "load": [3, 4], "disk": 3, "pickl": 3, "deseri": 3, "locat": [3, 4], "save_trained_model": 3, "serial": 3, "class": 3, "campkfold": 3, "train_idx": 3, "test_idx": 3, "custom": 3, "kfold": 3, "test": 3, "fold": 3, "get_n_split": 3, "y": 3, "get": [3, 4], "iter": 3, "np": 3, "arrai": 3, "label": 3, "default": [3, 4, 5], "int": [3, 4, 5], "get_train_test": 3, "from_camp": 3, "to_camp": 3, "x_camp": 3, "last": 3, "tupl": 3, "convert_cat_featur": 3, "convert": [3, 4], "categori": 3, "type": 3, "evaluate_model": 3, "machin": 3, "learn": 3, "nest": 3, "cross": 3, "valid": 3, "metric": 3, "rmse": 3, "filter_camp": 3, "min_camp": 3, "max_camp": 3, "load_final_data": 3, "wine_path": 3, "eto_path": 3, "meteo_path": 3, "meteorolog": [3, 4], "load_xi": 3, "14": 3, "sourc": 3, "merge_data": 3, "meteo_data": [3, 4], "left": 3, "join": 3, "id_estacion": [3, 4], "rmse_scor": 3, "y_true": 3, "y_pred": 3, "root": 3, "squar": 3, "error": 3, "like": 3, "shape": 3, "n_sampl": 3, "ground": 3, "truth": 3, "correct": 3, "search_model_param": 3, "param_grid": 3, "grid": 3, "tune": 3, "found": 3, "train_test_split": 3, "test_camp": 3, "one": [3, 4], "anoth": 3, "xy_split": 3, "basenencod": 3, "verbos": 3, "baseestim": 3, "transformermixin": 3, "classnameprefixfeaturesoutmixin": 3, "n": [3, 4], "level": 3, "self": 3, "catboostencod": 3, "onetoonefeaturemixin": 3, "catboost": 3, "quantilefeatureencod": 3, "qs": 3, "25": 3, "5": [3, 4], "75": 3, "true": [3, 4], "quantil": 3, "bool": [3, 4], "have": [3, 4], "zero": [3, 4, 5], "unit": 3, "precomput": 3, "ani": [3, 4], "rais": 3, "20": 3, "construct": 3, "thresholdfeatureencod": 3, "method": 3, "threshold": 3, "must": [3, 4], "median": 3, "typeerror": 3, "clean": 4, "preproces": 4, "raw": 4, "add_year_and_month": 4, "date": 4, "filter_relevant_month": 4, "eto_month": 4, "3": 4, "4": 4, "6": 4, "relev": 4, "flatten_pivot_column": 4, "eto_pivot": 4, "flatten": 4, "pivot": 4, "tabl": 4, "get_data_for_mean_group": 4, "cols_mean": 4, "cols_id": 4, "been": 4, "aggreg": 4, "get_data_for_sum_group": 4, "cols_sum": 4, "along": 4, "identifi": 4, "get_days_over_and_under_featur": 4, "function": [4, 5, 6], "extract": 4, "get_days_over_and_under_mean": 4, "some": 4, "process": 4, "tempovermean": 4, "temperaturelocaldayavg": 4, "tempundermean": 4, "precipundermean": 4, "precipamountlocaldayavg": 4, "snowundermean": 4, "snowamountlocaldayavg": 4, "windundermean": 4, "windspeedlocaldayavg": 4, "gustundermean": 4, "gustlocaldayavg": 4, "precipoverzero": 4, "snowoverzero": 4, "windoverzero": 4, "gustoverzero": 4, "out_column_nam": 4, "under": 4, "interest": 4, "g": 4, "prefix": 4, "count": 4, "id": 4, "under1std": 4, "over1std": 4, "under2std": 4, "over2std": 4, "get_mean_and_std_by_month": 4, "specif": [4, 6], "timestamp": 4, "other": 4, "std": 4, "get_monthly_data": 4, "get_totals_by_dai": 4, "24": 4, "get_totals_by_daytime_and_nighttim": 4, "daytim": 4, "nighttim": 4, "read": 4, "load_eto_dataset": 4, "parse_d": 4, "datetim": 4, "pivot_monthly_data": 4, "format": 4, "monthx": 4, "12": 4, "preprocess_eto_dataset": 4, "relat": 4, "temperatur": 4, "wind": 4, "gust": 4, "point": 4, "irrelev": 4, "fillna_by_valu": [4, 5], "fillna_by_group": [4, 5], "get_daily_mean_by_hour_rang": 4, "from_hour": 4, "to_hour": 4, "daili": 4, "within": [4, 5], "hour": 4, "rang": 4, "start": 4, "inclus": 4, "exclus": 4, "get_light_fetaur": 4, "light": 4, "ha": 4, "meanlighthours_month_1": 4, "meanlighthours_month_2": 4, "meanlighthours_month_6": 4, "get_temp_featur": 4, "It": [4, 6], "validtimeutc": 4, "measur": 4, "month_": 4, "_temp_avg_daytim": 4, "_temp_max_daytim": 4, "_temp_avg_nighttim": 4, "_temp_min_nighttim": 4, "note": 4, "load_meteo_data": 4, "preproces_meteo_data": 4, "add_std_superfici": 4, "load_wine_dataset": 4, "norm_column": 4, "renam": 4, "normal": 4, "preproces_wine_data": 4, "fillna_alt": 4, "fillna_sup": 4, "imput": 4, "oper": 4, "altitud": 4, "wise": 4, "process_altitud": 4, "take": [4, 5], "dash": 4, "common": 5, "non": 5, "defin": 5, "replace_zeros_with_na": 5, "python": 6, "datathon": 6, "cajamar": 6, "2023": 6, "necesari": 6, "Its": 6, "usag": 6, "mere": 6, "intern": 6, "team": 6}, "objects": {"malbecs.feateng": [[2, 0, 0, "-", "eto"], [2, 0, 0, "-", "features_eng"], [2, 0, 0, "-", "wine"]], "malbecs.feateng.eto": [[2, 1, 1, "", "feateng_eto"], [2, 1, 1, "", "get_mean_features"], [2, 1, 1, "", "get_std_features"], [2, 1, 1, "", "get_total_features"]], "malbecs.feateng.features_eng": [[2, 1, 1, "", "above_mean_col"], [2, 1, 1, "", "df_for_fe"], [2, 1, 1, "", "eto_annual_mean"], [2, 1, 1, "", "eto_annual_sum"], [2, 1, 1, "", "eto_dict_generator"], [2, 1, 1, "", "quantiles_col"]], "malbecs.feateng.wine": [[2, 1, 1, "", "feateng_wine_data"], [2, 1, 1, "", "get_historic_prod_he_by_var_modo"], [2, 1, 1, "", "get_historic_prod_he_by_var_modo_modo_zona"], [2, 1, 1, "", "get_n_var_finca_camp"], [2, 1, 1, "", "get_production_change_by_estacion"], [2, 1, 1, "", "get_production_changes"], [2, 1, 1, "", "get_shifted_production"], [2, 1, 1, "", "get_shifted_production_by_finca"], [2, 1, 1, "", "get_shifted_production_by_var"], [2, 1, 1, "", "get_shifted_production_he"], [2, 1, 1, "", "get_shifted_production_he_by_var"], [2, 1, 1, "", "get_shifted_production_he_by_var_modo"], [2, 1, 1, "", "get_shifted_production_he_by_var_modo_zona"], [2, 1, 1, "", "get_shifted_production_he_by_zone"], [2, 1, 1, "", "get_shifted_production_he_changes"], [2, 1, 1, "", "get_shifted_superficie"], [2, 1, 1, "", "get_sup_tot_camp_finca"], [2, 1, 1, "", "get_sup_tot_finca"], [2, 1, 1, "", "get_total_prod_from_he"]], "malbecs.modeling": [[3, 0, 0, "-", "models"], [3, 0, 0, "-", "train"], [3, 0, 0, "-", "transformers"]], "malbecs.modeling.models": [[3, 1, 1, "", "get_final_model"], [3, 1, 1, "", "get_final_model_eto_features"], [3, 1, 1, "", "get_final_model_num_features"], [3, 1, 1, "", "get_model_fase_nacional"], [3, 1, 1, "", "get_preprocesing_fase_nacional"], [3, 1, 1, "", "load_trained_model"], [3, 1, 1, "", "save_trained_model"]], "malbecs.modeling.train": [[3, 2, 1, "", "CampKFold"], [3, 1, 1, "", "convert_cat_features"], [3, 1, 1, "", "evaluate_model"], [3, 1, 1, "", "filter_camp"], [3, 1, 1, "", "load_final_data"], [3, 1, 1, "", "load_xy"], [3, 1, 1, "", "merge_data"], [3, 1, 1, "", "rmse_score"], [3, 1, 1, "", "search_model_params"], [3, 1, 1, "", "train_test_split"], [3, 1, 1, "", "xy_split"]], "malbecs.modeling.train.CampKFold": [[3, 3, 1, "", "get_n_splits"], [3, 3, 1, "", "get_train_test"], [3, 3, 1, "", "split"]], "malbecs.modeling.transformers": [[3, 2, 1, "", "BaseNEncoder"], [3, 2, 1, "", "CatBoostEncoder"], [3, 2, 1, "", "QuantileFeatureEncoder"], [3, 2, 1, "", "TargetEncoder"], [3, 2, 1, "", "ThresholdFeatureEncoder"]], "malbecs.modeling.transformers.BaseNEncoder": [[3, 3, 1, "", "fit"], [3, 3, 1, "", "transform"]], "malbecs.modeling.transformers.CatBoostEncoder": [[3, 3, 1, "", "fit"], [3, 3, 1, "", "transform"]], "malbecs.modeling.transformers.QuantileFeatureEncoder": [[3, 3, 1, "", "fit"], [3, 3, 1, "", "transform"]], "malbecs.modeling.transformers.TargetEncoder": [[3, 3, 1, "", "fit"], [3, 3, 1, "", "transform"]], "malbecs.modeling.transformers.ThresholdFeatureEncoder": [[3, 3, 1, "", "fit"], [3, 4, 1, "", "methods"], [3, 3, 1, "", "transform"]], "malbecs.preprocess": [[4, 0, 0, "-", "eto"], [4, 0, 0, "-", "meteo"], [4, 0, 0, "-", "wine"]], "malbecs.preprocess.eto": [[4, 1, 1, "", "add_year_and_month"], [4, 1, 1, "", "filter_relevant_months"], [4, 1, 1, "", "flatten_pivot_columns"], [4, 1, 1, "", "get_data_for_mean_group"], [4, 1, 1, "", "get_data_for_sum_group"], [4, 1, 1, "", "get_days_over_and_under_features"], [4, 1, 1, "", "get_days_over_and_under_mean"], [4, 1, 1, "", "get_mean_and_std_by_month"], [4, 1, 1, "", "get_monthly_data"], [4, 1, 1, "", "get_totals_by_day"], [4, 1, 1, "", "get_totals_by_daytime_and_nighttime"], [4, 1, 1, "", "load_eto_dataset"], [4, 1, 1, "", "parse_date"], [4, 1, 1, "", "pivot_monthly_data"], [4, 1, 1, "", "preprocess_eto_dataset"]], "malbecs.preprocess.meteo": [[4, 1, 1, "", "flatten_pivot_columns"], [4, 1, 1, "", "get_daily_mean_by_hour_range"], [4, 1, 1, "", "get_light_fetaures"], [4, 1, 1, "", "get_temp_features"], [4, 1, 1, "", "load_meteo_data"], [4, 1, 1, "", "preproces_meteo_data"]], "malbecs.preprocess.wine": [[4, 1, 1, "", "add_std_superficie"], [4, 1, 1, "", "load_wine_dataset"], [4, 1, 1, "", "norm_columns"], [4, 1, 1, "", "preproces_wine_data"], [4, 1, 1, "", "process_altitud"]], "malbecs.utils": [[5, 0, 0, "-", "utils"]], "malbecs.utils.utils": [[5, 1, 1, "", "fillna_by_group"], [5, 1, 1, "", "fillna_by_value"], [5, 1, 1, "", "replace_zeros_with_na"]]}, "objtypes": {"0": "py:module", "1": "py:function", "2": "py:class", "3": "py:method", "4": "py:attribute"}, "objnames": {"0": ["py", "module", "Python module"], "1": ["py", "function", "Python function"], "2": ["py", "class", "Python class"], "3": ["py", "method", "Python method"], "4": ["py", "attribute", "Python attribute"]}, "titleterms": {"welcom": 0, "malbec": [0, 1, 2, 3, 4, 5, 6], "s": 0, "document": 0, "content": 0, "indic": 0, "tabl": 0, "feateng": 2, "eto": [2, 4], "features_eng": 2, "wine": [2, 4], "model": 3, "train": 3, "transform": 3, "preprocess": 4, "meteo": 4, "util": 5, "packag": 5, "about": 6}, "envversion": {"sphinx.domains.c": 2, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 6, "sphinx.domains.index": 1, "sphinx.domains.javascript": 2, "sphinx.domains.math": 2, "sphinx.domains.python": 3, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "nbsphinx": 4, "sphinx": 56}})