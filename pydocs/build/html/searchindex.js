Search.setIndex({"docnames": ["index", "malbecs", "malbecs.feateng", "malbecs.modeling", "malbecs.preprocess", "malbecs.utils", "readme"], "filenames": ["index.rst", "malbecs.rst", "malbecs.feateng.rst", "malbecs.modeling.rst", "malbecs.preprocess.rst", "malbecs.utils.rst", "readme.rst"], "titles": ["Welcome to malbecs\u2019s documentation!", "malbecs", "malbecs.feateng", "malbecs.modeling", "malbecs.preprocess", "malbecs.utils package", "Malbecs - Datathon Cajamar 2023"], "terms": {"datathon": 0, "cajamar": 0, "2023": 0, "packag": [0, 1, 6], "subpackag": [], "feateng": [0, 1], "submodul": [], "eto": [0, 1, 3], "modul": 0, "features_eng": [0, 1], "wine": [0, 1, 3], "model": [0, 1, 6], "train": [0, 1], "transform": [0, 1, 4], "preprocess": [0, 1, 3, 6], "meteo": [0, 1], "util": [0, 1], "index": [0, 3], "search": [0, 3], "page": 0, "content": [], "feateng_eto": 2, "eto_data": [2, 3, 4], "output_path": [2, 4], "none": [2, 3, 4], "get_mean_featur": 2, "featur": [2, 3, 4, 6], "name": [2, 3, 4], "get_std_featur": 2, "get_total_featur": 2, "above_mean_col": 2, "data": [2, 3, 4, 5, 6], "col": [2, 3, 4, 5], "df_for_f": 2, "eto_annual_mean": 2, "df": 2, "cols_list": 2, "eto_annual_sum": 2, "eto_dict_gener": 2, "quantiles_col": 2, "feateng_wine_data": 2, "wine_data": [2, 3, 4], "get_historic_prod_he_by_var_modo": 2, "get_historic_prod_he_by_var_modo_modo_zona": 2, "get_n_var_finca_camp": 2, "get_production_change_by_estacion": 2, "datafram": [2, 3, 4, 5], "get_production_chang": 2, "get_shifted_product": 2, "get_shifted_production_by_finca": 2, "get_shifted_production_by_var": 2, "get_shifted_production_h": 2, "get_shifted_production_he_by_var": 2, "get_shifted_production_he_by_var_modo": 2, "get_shifted_production_he_by_var_modo_zona": 2, "get_shifted_production_he_by_zon": 2, "get_shifted_production_he_chang": 2, "get_shifted_superfici": 2, "get_sup_tot_camp_finca": 2, "get_sup_tot_finca": 2, "get_total_prod_from_h": 2, "get_final_model": 3, "get_final_model_eto_featur": 3, "get_final_model_num_featur": 3, "get_model_fase_nacion": 3, "modelo": 3, "final": [3, 4], "para": 3, "fase": 3, "nacion": 3, "get_preprocesing_fase_nacion": 3, "pipelin": 3, "load_trained_model": 3, "path": [3, 4], "save_trained_model": 3, "class": 3, "campkfold": 3, "train_idx": 3, "test_idx": 3, "base": 3, "object": [3, 4], "get_n_split": 3, "x": [3, 4], "y": 3, "group": [3, 4, 5], "get_train_test": 3, "from_camp": 3, "to_camp": 3, "split": 3, "convert_cat_featur": 3, "evaluate_model": 3, "filter_camp": 3, "min_camp": 3, "max_camp": 3, "load_final_data": 3, "wine_path": 3, "eto_path": 3, "meteo_path": 3, "load_xi": 3, "14": 3, "21": 3, "merge_data": 3, "meteo_data": [3, 4], "rmse_scor": 3, "y_true": 3, "y_pred": 3, "search_model_param": 3, "param_grid": 3, "train_test_split": 3, "test_camp": 3, "xy_split": 3, "basenencod": 3, "verbos": 3, "int": [3, 4], "0": [3, 4, 5], "2": [3, 4], "baseestim": 3, "transformermixin": 3, "classnameprefixfeaturesoutmixin": 3, "fit": 3, "catboostencod": 3, "onetoonefeaturemixin": 3, "groupedquantilefeatureencod": [], "str": [3, 4, 5], "list": [3, 4, 5], "valu": [3, 4, 5], "qs": 3, "25": 3, "5": [3, 4], "75": 3, "scale": 3, "true": [3, 4], "seri": 3, "quantilefeatureencod": 3, "targetencod": 3, "option": [3, 4], "min_samples_leaf": 3, "20": 3, "thresholdfeatureencod": 3, "method": 3, "mean": [3, 4], "median": 3, "add_year_and_month": 4, "add": 4, "year": [3, 4], "month": 4, "column": [3, 4], "date": 4, "arg": [3, 4], "A": [3, 4], "panda": [3, 4], "contain": [3, 4, 6], "return": [3, 4], "ad": 4, "filter_relevant_month": 4, "eto_month": 4, "1": [3, 4], "3": 4, "4": 4, "6": 4, "filter": [3, 4], "relev": 4, "from": [3, 4], "pd": [3, 4], "monthli": 4, "default": [3, 4], "flatten_pivot_column": 4, "eto_pivot": 4, "flatten": 4, "pivot": 4, "tabl": 4, "new": 4, "get_data_for_mean_group": 4, "cols_mean": 4, "cols_id": 4, "specifi": [3, 4], "have": [3, 4], "been": 4, "aggreg": 4, "each": [3, 4], "The": [3, 4], "should": 4, "us": [3, 4], "get_data_for_sum_group": 4, "cols_sum": 4, "sum": 4, "dai": [3, 4], "along": 4, "identifi": 4, "row": 4, "string": 4, "get_days_over_and_under_featur": 4, "thi": 4, "function": [4, 6], "extract": 4, "get_days_over_and_under_mean": 4, "appli": 4, "some": 4, "addit": 4, "process": 4, "step": 4, "weather": 4, "inform": 4, "repres": 4, "uniqu": 4, "combin": 4, "differ": [3, 4], "ar": [3, 4], "follow": 4, "tempovermean": 4, "number": [3, 4], "where": [3, 4], "temperaturelocaldayavg": 4, "wa": 4, "abov": 4, "tempundermean": 4, "below": 4, "precipundermean": 4, "precipamountlocaldayavg": 4, "snowundermean": 4, "snowamountlocaldayavg": 4, "windundermean": 4, "windspeedlocaldayavg": 4, "gustundermean": 4, "gustlocaldayavg": 4, "precipoverzero": 4, "greater": 4, "than": 4, "zero": [3, 4], "snowoverzero": 4, "windoverzero": 4, "gustoverzero": 4, "out_column_nam": 4, "over": 4, "bool": [3, 4], "under": 4, "get": [3, 4], "standard": 4, "deviat": 4, "given": [3, 4], "interest": 4, "e": 4, "g": 4, "prefix": 4, "output": 4, "whether": 4, "includ": 4, "count": 4, "id_estacion": [3, 4], "station": 4, "id": 4, "under1std": 4, "over1std": 4, "under2std": 4, "over2std": 4, "get_mean_and_std_by_month": 4, "calcul": [3, 4], "specif": [4, 6], "correspond": 4, "timestamp": 4, "other": 4, "which": 4, "float": [3, 4], "std": 4, "get_monthly_data": 4, "get_totals_by_dai": 4, "total": 4, "paramet": [], "multipli": 4, "24": 4, "get_totals_by_daytime_and_nighttim": 4, "daytim": 4, "nighttim": 4, "read": 4, "load_eto_dataset": 4, "load": [3, 4], "dataset": 4, "file": [3, 4], "parse_d": 4, "convert": [3, 4], "datetim": 4, "pivot_monthly_data": 4, "input": [3, 4], "creat": [3, 4, 6], "format": 4, "monthx": 4, "12": 4, "preprocess_eto_dataset": 4, "perform": [3, 4, 6], "relat": 4, "temperatur": 4, "precipit": 4, "snow": 4, "wind": 4, "gust": 4, "point": 4, "out": 4, "irrelev": 4, "fill": [3, 4], "miss": [3, 4], "fillna_by_valu": [4, 5], "all": [3, 4, 6], "fillna_by_group": [4, 5], "merg": [3, 4], "kei": 4, "If": [3, 4], "save": [3, 4], "csv": [3, 4], "locat": [3, 4], "one": [3, 4], "more": 4, "get_daily_mean_by_hour_rang": 4, "from_hour": 4, "to_hour": 4, "comput": [3, 4], "daili": 4, "variabl": [3, 4], "within": 4, "hour": 4, "rang": 4, "start": 4, "inclus": 4, "end": 4, "exclus": 4, "get_light_fetaur": 4, "light": 4, "meteorolog": [3, 4], "ha": 4, "meanlighthours_month_1": 4, "meanlighthours_month_2": 4, "meanlighthours_month_6": 4, "get_temp_featur": 4, "gener": [3, 4], "It": [4, 6], "must": [3, 4], "validtimeutc": 4, "measur": 4, "month_": 4, "n": [3, 4], "_temp_avg_daytim": 4, "averag": 4, "between": [3, 4], "_temp_max_daytim": 4, "maximum": [3, 4], "_temp_avg_nighttim": 4, "_temp_min_nighttim": 4, "minimum": [3, 4], "note": 4, "load_meteo_data": 4, "preproces_meteo_data": 4, "raw": 4, "an": [3, 4], "indic": [3, 4], "add_std_superfici": 4, "superfici": 4, "id_finca": 4, "variedad": 4, "modo": 4, "std_superfici": 4, "also": 4, "boolean": 4, "std_superficie_nul": 4, "load_wine_dataset": 4, "norm_column": 4, "renam": 4, "set": [3, 4], "normal": 4, "preproces_wine_data": 4, "fillna_alt": 4, "fillna_sup": 4, "variou": 4, "clean": 4, "imput": 4, "oper": 4, "altitud": 4, "wise": 4, "process_altitud": 4, "take": 4, "ani": [3, 4], "dash": 4, "replace_zeros_with_na": 5, "encod": 3, "categor": 3, "target": 3, "level": 3, "sampl": 3, "requir": 3, "when": 3, "construct": 3, "self": 3, "python": 6, "necesari": 6, "engin": 6, "Its": 6, "usag": 6, "mere": 6, "intern": 6, "team": 6, "catboost": 3, "categori": 3, "quantil": 3, "s": 3, "unit": 3, "varianc": 3, "attribut": [], "category_encodings_": [], "dict": 3, "dictionari": 3, "map": [], "its": [], "mean_": [], "precomput": 3, "rais": 3, "threshold": 3, "avail": [], "valueerror": [], "typeerror": 3, "malbec": [], "custom": 3, "kfold": 3, "test": 3, "fold": 3, "iter": 3, "np": 3, "arrai": 3, "label": 3, "campaign": 3, "x_camp": 3, "first": 3, "last": 3, "yield": 3, "tupl": 3, "type": 3, "two": 3, "disk": 3, "pickl": 3, "deseri": 3, "left": 3, "join": 3, "campa\u00f1a": 3, "respect": 3, "root": 3, "squar": 3, "error": 3, "rmse": 3, "like": 3, "shape": 3, "n_sampl": 3, "ground": 3, "truth": 3, "correct": 3, "estim": 3, "serial": 3, "anoth": 3, "evalu": 3, "machin": 3, "learn": 3, "nest": 3, "cross": 3, "valid": 3, "metric": 3, "sourc": 3, "consid": 3, "best": 3, "hyperparamet": 3, "grid": 3, "tune": 3, "found": 3}, "objects": {"malbecs.feateng": [[2, 0, 0, "-", "eto"], [2, 0, 0, "-", "features_eng"], [2, 0, 0, "-", "wine"]], "malbecs.feateng.eto": [[2, 1, 1, "", "feateng_eto"], [2, 1, 1, "", "get_mean_features"], [2, 1, 1, "", "get_std_features"], [2, 1, 1, "", "get_total_features"]], "malbecs.feateng.features_eng": [[2, 1, 1, "", "above_mean_col"], [2, 1, 1, "", "df_for_fe"], [2, 1, 1, "", "eto_annual_mean"], [2, 1, 1, "", "eto_annual_sum"], [2, 1, 1, "", "eto_dict_generator"], [2, 1, 1, "", "quantiles_col"]], "malbecs.feateng.wine": [[2, 1, 1, "", "feateng_wine_data"], [2, 1, 1, "", "get_historic_prod_he_by_var_modo"], [2, 1, 1, "", "get_historic_prod_he_by_var_modo_modo_zona"], [2, 1, 1, "", "get_n_var_finca_camp"], [2, 1, 1, "", "get_production_change_by_estacion"], [2, 1, 1, "", "get_production_changes"], [2, 1, 1, "", "get_shifted_production"], [2, 1, 1, "", "get_shifted_production_by_finca"], [2, 1, 1, "", "get_shifted_production_by_var"], [2, 1, 1, "", "get_shifted_production_he"], [2, 1, 1, "", "get_shifted_production_he_by_var"], [2, 1, 1, "", "get_shifted_production_he_by_var_modo"], [2, 1, 1, "", "get_shifted_production_he_by_var_modo_zona"], [2, 1, 1, "", "get_shifted_production_he_by_zone"], [2, 1, 1, "", "get_shifted_production_he_changes"], [2, 1, 1, "", "get_shifted_superficie"], [2, 1, 1, "", "get_sup_tot_camp_finca"], [2, 1, 1, "", "get_sup_tot_finca"], [2, 1, 1, "", "get_total_prod_from_he"]], "malbecs.modeling": [[3, 0, 0, "-", "models"], [3, 0, 0, "-", "train"], [3, 0, 0, "-", "transformers"]], "malbecs.modeling.models": [[3, 1, 1, "", "get_final_model"], [3, 1, 1, "", "get_final_model_eto_features"], [3, 1, 1, "", "get_final_model_num_features"], [3, 1, 1, "", "get_model_fase_nacional"], [3, 1, 1, "", "get_preprocesing_fase_nacional"], [3, 1, 1, "", "load_trained_model"], [3, 1, 1, "", "save_trained_model"]], "malbecs.modeling.train": [[3, 2, 1, "", "CampKFold"], [3, 1, 1, "", "convert_cat_features"], [3, 1, 1, "", "evaluate_model"], [3, 1, 1, "", "filter_camp"], [3, 1, 1, "", "load_final_data"], [3, 1, 1, "", "load_trained_model"], [3, 1, 1, "", "load_xy"], [3, 1, 1, "", "merge_data"], [3, 1, 1, "", "rmse_score"], [3, 1, 1, "", "save_trained_model"], [3, 1, 1, "", "search_model_params"], [3, 1, 1, "", "train_test_split"], [3, 1, 1, "", "xy_split"]], "malbecs.modeling.train.CampKFold": [[3, 3, 1, "", "get_n_splits"], [3, 3, 1, "", "get_train_test"], [3, 3, 1, "", "split"]], "malbecs.modeling.transformers": [[3, 2, 1, "", "BaseNEncoder"], [3, 2, 1, "", "CatBoostEncoder"], [3, 2, 1, "", "QuantileFeatureEncoder"], [3, 2, 1, "", "TargetEncoder"], [3, 2, 1, "", "ThresholdFeatureEncoder"]], "malbecs.modeling.transformers.BaseNEncoder": [[3, 3, 1, "", "fit"], [3, 3, 1, "", "transform"]], "malbecs.modeling.transformers.CatBoostEncoder": [[3, 3, 1, "", "fit"], [3, 3, 1, "", "transform"]], "malbecs.modeling.transformers.QuantileFeatureEncoder": [[3, 3, 1, "", "fit"], [3, 3, 1, "", "transform"]], "malbecs.modeling.transformers.TargetEncoder": [[3, 3, 1, "", "fit"], [3, 3, 1, "", "transform"]], "malbecs.modeling.transformers.ThresholdFeatureEncoder": [[3, 3, 1, "", "fit"], [3, 4, 1, "", "methods"], [3, 3, 1, "", "transform"]], "malbecs.preprocess": [[4, 0, 0, "-", "eto"], [4, 0, 0, "-", "meteo"], [4, 0, 0, "-", "wine"]], "malbecs.preprocess.eto": [[4, 1, 1, "", "add_year_and_month"], [4, 1, 1, "", "filter_relevant_months"], [4, 1, 1, "", "flatten_pivot_columns"], [4, 1, 1, "", "get_data_for_mean_group"], [4, 1, 1, "", "get_data_for_sum_group"], [4, 1, 1, "", "get_days_over_and_under_features"], [4, 1, 1, "", "get_days_over_and_under_mean"], [4, 1, 1, "", "get_mean_and_std_by_month"], [4, 1, 1, "", "get_monthly_data"], [4, 1, 1, "", "get_totals_by_day"], [4, 1, 1, "", "get_totals_by_daytime_and_nighttime"], [4, 1, 1, "", "load_eto_dataset"], [4, 1, 1, "", "parse_date"], [4, 1, 1, "", "pivot_monthly_data"], [4, 1, 1, "", "preprocess_eto_dataset"]], "malbecs.preprocess.meteo": [[4, 1, 1, "", "flatten_pivot_columns"], [4, 1, 1, "", "get_daily_mean_by_hour_range"], [4, 1, 1, "", "get_light_fetaures"], [4, 1, 1, "", "get_temp_features"], [4, 1, 1, "", "load_meteo_data"], [4, 1, 1, "", "preproces_meteo_data"]], "malbecs.preprocess.wine": [[4, 1, 1, "", "add_std_superficie"], [4, 1, 1, "", "load_wine_dataset"], [4, 1, 1, "", "norm_columns"], [4, 1, 1, "", "preproces_wine_data"], [4, 1, 1, "", "process_altitud"]], "malbecs.utils": [[5, 0, 0, "-", "utils"]], "malbecs.utils.utils": [[5, 1, 1, "", "fillna_by_group"], [5, 1, 1, "", "fillna_by_value"], [5, 1, 1, "", "replace_zeros_with_na"]]}, "objtypes": {"0": "py:module", "1": "py:function", "2": "py:class", "3": "py:method", "4": "py:attribute"}, "objnames": {"0": ["py", "module", "Python module"], "1": ["py", "function", "Python function"], "2": ["py", "class", "Python class"], "3": ["py", "method", "Python method"], "4": ["py", "attribute", "Python attribute"]}, "titleterms": {"welcom": 0, "malbec": [0, 1, 2, 3, 4, 5, 6], "s": 0, "document": 0, "content": 0, "indic": 0, "tabl": 0, "packag": 5, "subpackag": [], "feateng": 2, "submodul": [], "eto": [2, 4], "modul": [], "features_eng": 2, "wine": [2, 4], "model": 3, "train": 3, "transform": 3, "preprocess": 4, "meteo": 4, "util": 5, "datathon": 6, "cajamar": 6, "2023": 6}, "envversion": {"sphinx.domains.c": 2, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 6, "sphinx.domains.index": 1, "sphinx.domains.javascript": 2, "sphinx.domains.math": 2, "sphinx.domains.python": 3, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx": 56}})